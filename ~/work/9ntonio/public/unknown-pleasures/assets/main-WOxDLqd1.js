(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();const O="./assets/disorder.mp3",N=.075,i=document.getElementById("visualizer"),E=document.getElementById("playButton"),v=document.getElementById("playButtonText"),C=document.querySelector(".visualization-area"),y=document.getElementById("site-title"),u=i.getContext("2d");let h,d,a,p=!1,A=null;const w=54,f=[],M=30;let L=0,I=null;async function z(){try{y.textContent="Loading";const n=await fetch(O);if(!n.ok)throw new Error(`Error: ${n.status}`);const t=await n.arrayBuffer();h=new(window.AudioContext||window.webkitAudioContext),d=h.createAnalyser(),d.fftSize=512,A=await h.decodeAudioData(t),y.textContent="Unknown Pleasures",E.disabled=!1,v.textContent="INITIATE"}catch(n){console.error("Error initializing audio:",n),y.textContent=`Error: ${n.message}`}}function R(){if(!A){y.textContent="Error: Audio didn't load";return}if(p){let e=function(r){const c=r-t,g=Math.max(0,1-c/o);if(c>=o){u.fillStyle="rgb(0, 0, 0)",u.fillRect(0,0,i.width,i.height),f.length=0;return}u.fillStyle="rgb(0, 0, 0)",u.fillRect(0,0,i.width,i.height),s.forEach((l,m)=>{T(u,l,m,g*.9)}),requestAnimationFrame(e)};var n=e;a&&(a.stop(),a.disconnect()),I&&cancelAnimationFrame(I),p=!1,v.textContent="INITIATE",C.classList.remove("hide-controls");const t=performance.now(),o=1500,s=[...f];requestAnimationFrame(e)}else a=h.createBufferSource(),a.buffer=A,a.connect(d),d.connect(h.destination),a.loop=!0,a.start(0),p=!0,v.textContent="TERMINATE",C.classList.add("hide-controls"),W()}function U(n){const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++){const s=o/(n.length-1),e=Math.sin(s*Math.PI);t[o]=n[o]*e}return t[0]=0,t[t.length-1]=0,t}function P(n,t,o,s,e){return n-t*o*.5*Math.sin(s/e*Math.PI)}function T(n,t,o,s=.9){n.beginPath();const e=i.height*N,r=i.height-e*2,c=i.height-e-o*(r/w),g=1-o/w*.6;for(let l=0;l<t.length;l++){const m=l/t.length*i.width,F=t[l],S=P(c,F,g,l,t.length);if(l===0)n.moveTo(m,c);else if(l===t.length-1)n.lineTo(m,c);else{const b=(l-1)/t.length*i.width,q=t[l-1],B=P(c,q,g,l-1,t.length),x=(m+b)/2;n.quadraticCurveTo(b,B,x,(S+B)/2)}}n.strokeStyle=`rgba(255, 255, 255, ${s})`,n.lineWidth=2+(w-o)*.025,n.stroke()}function W(){i.width=i.clientWidth,i.height=i.clientHeight;const n=d.frequencyBinCount,t=new Uint8Array(n);function o(s){if(!p||(I=requestAnimationFrame(o),s-L<M))return;L=s,d.getByteFrequencyData(t);const e=U(t);f.unshift([...e]),f.length>w&&f.pop(),u.fillStyle="rgb(0, 0, 0)",u.fillRect(0,0,i.width,i.height),f.forEach((r,c)=>{T(u,r,c)})}o(0)}E.disabled=!0;E.addEventListener("click",R);z();
